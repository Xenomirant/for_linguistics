import xml.etree.ElementTree as ET
import csv

filename = 'D:\\uusi_kansio\glossed_texts.xml'
filename_out = 'D:\\uusi_kansio\itl_extraction.csv'

def xml_to_csv(filename, filename_out):
    tree = ET.parse(filename)
    root = tree.getroot()
    for lemma in root.findall(".//words/word"):
        for stem in lemma.findall(".//morphemes/morph[@type='stem']/item[@type='txt']"):
            for gloss in lemma.findall(".//morphemes/morph"):
                if gloss.attrib['type'] in ['circumfix', 'prefix', 'suffix', 'enclitic']:
                    gloss_line = gloss.find("item[@type='gls']").text
                elif gloss.attrib['type'] in ['stem']:
                    gloss_line = gloss.find("item[@type='msa']").text
                else:
                    pass
                print(stem.text, '\t', lemma.find("item[@type='txt']").text, '\t', gloss_line)

xml_to_csv(filename, filename_out)
