import xml.etree.ElementTree as ET
import csv

filename = 'D:\\uusi_kansio\glossed_texts.xml'
filename_out = 'D:\\uusi_kansio\itl_extraction.csv'

keys = []
values = []

import xml.etree.ElementTree as ET
import csv

filename = 'D:\\uusi_kansio\\glossed_texts.xml'
filename_out = 'D:\\uusi_kansio\itl_extraction.csv'

my_dict = dict()
keys = []
values = []

def xml_to_csv(filename, filename_out):
    tree = ET.parse(filename)
    root = tree.getroot()
    for lemma in root.findall(".//words/word"):
        for stem in lemma.findall(".//morphemes/morph[@type='root']/item[@type='txt']"):
            STEM = stem.text
            for gloss in lemma.findall(".//morphemes/morph"):
                if gloss.attrib['type'] in ['circumfix', 'prefix', 'suffix', 'enclitic']:
                    GLOSS = gloss.find("item[@type='gls']").text
                elif gloss.attrib['type'] in ['root']:
                    GLOSS = gloss.find("item[@type='msa']").text
                else:
                    GLOSS = 'EP'
    # if LEMMA in my_dict:
    #     my_dict[LEMMA].add(GLOSS)
    # else:
    #     my_dict[LEMMA] = {GLOSS}
    # print(my_dict)
                LEMMA = lemma.find("item[@type='txt']").text
                print(STEM, LEMMA, GLOSS)


                # with open(filename_out, "w", newline="") as file:
                #     columns = [STEM, LEMMA, GLOSS]
                #     writer = csv.DictWriter(file, fieldnames=columns)
                #     writer.writerows(columns)
                #     file.close()

xml_to_csv(filename, filename_out)
